# for SFP final presen
マイコンのプログラムや運転台の受け渡しが間に合わないので、BDM時代のソースコードを使って、無理やりPMSMを空回しして最終発表用の動画を撮る。

## 注意点
- このプログラムで、自転車を実際に地面で走らせないこと
 - 磁極位置が分からないので逆回転する
 - 負荷トルクが大きいため容易に脱調する
 - そもそもトルク制御してないので法律違反

## 変更点
### pwm.c
- デモモードでは「自転車の速度」を加速度ACC(km/h/s)で加速し(160行目近辺)、これを電車の速度に換算している(175行目近辺)。この換算部分を、単純に3倍するように変更している。
- 速度ゼロから始動する際、3秒間fs=0,Vs=1(5V時)でPWMを行い、phase_sin_w=0.0 の位相角で直流を流す。これにより磁極位置を強制的に決めてスタートする。
- notch='N'(惰行)のときもpwmをし続ける。こうでないと磁極位置が分からなくなってしまう